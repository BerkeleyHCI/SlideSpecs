#!/usr/bin/env zsh

# convert-pdf [file.pdf] [/out/dir]

# requirements
# convert -- brew install imagemagick

export MAGICK_HOME="$HOME/Code/ImageMagick-7.0.10"
export PATH="$MAGICK_HOME/bin:$PATH"
export DYLD_LIBRARY_PATH="$MAGICK_HOME/lib/"

full=$(basename -- "$1")
base="${full%.*}"
extn="${full##*.}"
images="$2/images"

# Adding max-width to keep images smaller/interface responsive.
convert -density 100 "$1" -resize 800 "$images/$base-%04d.png"
find "$images" -type f -iname "*$base*png"
echo "convert-pdf complete."
exit 0
